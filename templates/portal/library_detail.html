{% extends "base.html" %}

{% block title %}{{ folder.name }} | Biblioteci{% endblock %}

{% block content %}
<section class="section-header">
    <div>
        <h1>{{ folder.name }}</h1>
        {% if folder.description %}<p>{{ folder.description }}</p>{% endif %}
        <a href="{% url 'portal:libraries' %}" class="chip-button chip-button--ghost">&larr; Înapoi la biblioteci</a>
    </div>
    <div class="section-header__actions">
        <a
            href="{% url 'portal:download_library_archive' folder.id %}"
            class="chip-button"
            aria-label="Descarcă folderul ca arhivă ZIP"
            title="Descarcă folderul ca arhivă ZIP"
        >
            <svg aria-hidden="true" focusable="false" viewBox="0 0 24 24">
                <path d="M12 2a1 1 0 0 1 1 1v10.586l2.293-2.293a1 1 0 0 1 1.414 1.414l-4 4a1 1 0 0 1-1.414 0l-4-4a1 1 0 1 1 1.414-1.414L11 13.586V3a1 1 0 0 1 1-1zm-7 14a1 1 0 0 1 1 1v2h12v-2a1 1 0 1 1 2 0v3a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1z" />
            </svg>
            <span>Descarcă folder</span>
        </a>
    </div>
</section>

<section class="card">
    <h2>Documente în folder</h2>
    {% if documents %}
        <table class="data-table">
            <thead>
                <tr>
                    <th>Titlu</th>
                    <th>Creat</th>
                    <th>OCR Job</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                {% for document in documents %}
                    <tr>
                        <td>{{ document.title }}</td>
                        <td>{{ document.created_at|date:"d.m.Y H:i" }}</td>
                        <td>{% if document.ocr_job %}{{ document.ocr_job.get_status_display }}{% else %}-{% endif %}</td>
                        <td class="table-actions">
                            <a href="{% url 'portal:preview' document.id %}" class="chip-button">Previzualizează</a>
                            {% if document.processed_file %}
                                <a href="{% url 'portal:download_document' document.id %}" class="chip-button chip-button--ghost">Descarcă PDF</a>
                            {% endif %}
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p class="muted">Acest folder nu conține încă documente.</p>
    {% endif %}
</section>
{% endblock %}
