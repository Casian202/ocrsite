{% extends "base.html" %}

{% block title %}{{ folder.name }} | Biblioteci{% endblock %}

{% block content %}
<section class="page-header">
    <div class="page-header__text">
        <a href="{% url 'portal:libraries' %}" class="btn btn--ghost">&larr; Înapoi la biblioteci</a>
        <h1>{{ folder.name }}</h1>
        {% if folder.description %}
            <p>{{ folder.description }}</p>
        {% endif %}
    </div>
    <div class="folder-toolbar__actions">
        <a
            href="{% url 'portal:download_library_archive' folder.id %}"
            class="btn btn--primary"
            aria-label="Descarcă folderul ca arhivă ZIP"
        >
            Descarcă arhiva folderului
        </a>
    </div>
</section>

<section class="surface-card">
    <div class="folder-toolbar">
        <h2 class="section-title">Documente în folder</h2>
        <span class="status-chip">{{ documents|length }} fișiere procesate</span>
    </div>
    {% if documents %}
        <table class="table-card">
            <thead>
                <tr>
                    <th>Titlu</th>
                    <th>Creat</th>
                    <th>Status OCR</th>
                    <th class="table-align-right">Acțiuni</th>
                </tr>
            </thead>
            <tbody>
                {% for document in documents %}
                    <tr>
                        <td>{{ document.title }}</td>
                        <td>{{ document.created_at|date:"d.m.Y H:i" }}</td>
                        <td>{% if document.ocr_job %}{{ document.ocr_job.get_status_display }}{% else %}-{% endif %}</td>
                        <td class="table-align-right">
                            <div class="table-actions">
                                <a href="{% url 'portal:preview' document.id %}" class="btn btn--ghost">Previzualizează</a>
                                {% if document.processed_file %}
                                    <a href="{% url 'portal:download_document' document.id %}" class="btn btn--primary">Descarcă PDF</a>
                                {% endif %}
                            </div>
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    {% else %}
        <p class="muted">Acest folder nu conține încă documente procesate.</p>
    {% endif %}
</section>
{% endblock %}
